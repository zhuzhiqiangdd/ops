# ä»£ç è§„èŒƒ

## ç‰ˆæœ¬ä¿¡æ¯
- ç‰ˆæœ¬å·: v1.0.0
- æ›´æ–°æ—¥æœŸ: 2024-03-21
- çŠ¶æ€: [ğŸ—ï¸] è¿›è¡Œä¸­

## ä¸€ã€é€šç”¨è§„èŒƒ
### 1.1 å‘½åè§„èŒƒ
```python
# 1. ç±»åä½¿ç”¨é©¼å³°å‘½åæ³•
class UserManager:
    pass

# 2. å‡½æ•°å’Œå˜é‡ä½¿ç”¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿
def get_user_info():
    user_name = "å¼ ä¸‰"
    return user_name

# 3. å¸¸é‡ä½¿ç”¨å¤§å†™å­—æ¯åŠ ä¸‹åˆ’çº¿
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30

# 4. ç§æœ‰å±æ€§å’Œæ–¹æ³•ä½¿ç”¨åŒä¸‹åˆ’çº¿å‰ç¼€
class Account:
    def __init__(self):
        self.__balance = 0
        
    def __calculate_interest(self):
        return self.__balance * 0.03
```

### 1.2 æ³¨é‡Šè§„èŒƒ
```python
class OrderService:
    """
    è®¢å•æœåŠ¡ç±»
    
    è´Ÿè´£å¤„ç†è®¢å•ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘,åŒ…æ‹¬:
    1. è®¢å•åˆ›å»º
    2. è®¢å•æ”¯ä»˜
    3. è®¢å•å–æ¶ˆ
    4. è®¢å•æŸ¥è¯¢
    """
    
    def create_order(self, user_id: str, items: list) -> dict:
        """
        åˆ›å»ºè®¢å•
        
        Args:
            user_id: ç”¨æˆ·ID
            items: è®¢å•å•†å“åˆ—è¡¨
            
        Returns:
            dict: è®¢å•ä¿¡æ¯
            
        Raises:
            ValueError: å‚æ•°éªŒè¯å¤±è´¥
            DatabaseError: æ•°æ®åº“æ“ä½œå¤±è´¥
        """
        # å‚æ•°éªŒè¯
        if not items:
            raise ValueError("è®¢å•å•†å“ä¸èƒ½ä¸ºç©º")
            
        # å…·ä½“å®ç°...
        pass
```

### 1.3 æ ¼å¼è§„èŒƒ
```python
# 1. ä½¿ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›
def process_data():
    result = []
    for item in data:
        if item.is_valid():
            result.append(item)
    return result

# 2. è¿ç®—ç¬¦å‰ååŠ ç©ºæ ¼
total = price * quantity + tax

# 3. é€—å·ååŠ ç©ºæ ¼
def register(name, age, email):
    pass

# 4. å‡½æ•°ä¹‹é—´ç©ºä¸¤è¡Œ
def get_user():
    pass


def save_user():
    pass
```

## äºŒã€åç«¯è§„èŒƒ
### 2.1 å¼‚å¸¸å¤„ç†
```python
# è‡ªå®šä¹‰å¼‚å¸¸ç±»
class BusinessError(Exception):
    """ä¸šåŠ¡å¼‚å¸¸åŸºç±»"""
    def __init__(self, message, code=None):
        self.message = message
        self.code = code or 500
        super().__init__(message)


class ValidationError(BusinessError):
    """å‚æ•°éªŒè¯å¼‚å¸¸"""
    def __init__(self, message):
        super().__init__(message, code=400)


# å¼‚å¸¸å¤„ç†ç¤ºä¾‹
def transfer_money(from_account, to_account, amount):
    try:
        # å‚æ•°éªŒè¯
        if amount <= 0:
            raise ValidationError("è½¬è´¦é‡‘é¢å¿…é¡»å¤§äº0")
            
        # ä¸šåŠ¡å¤„ç†
        from_account.withdraw(amount)
        to_account.deposit(amount)
        
    except ValidationError as e:
        # å‚æ•°éªŒè¯å¼‚å¸¸å¤„ç†
        logger.warning(f"å‚æ•°éªŒè¯å¤±è´¥: {e.message}")
        raise
        
    except Exception as e:
        # å…¶ä»–å¼‚å¸¸å¤„ç†
        logger.error(f"è½¬è´¦å¤±è´¥: {str(e)}")
        raise BusinessError("è½¬è´¦å¤„ç†å¤±è´¥")
```

### 2.2 æ—¥å¿—è§„èŒƒ
```python
import logging

# æ—¥å¿—é…ç½®
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s [%(levelname)s] %(message)s',
    handlers=[
        logging.FileHandler('app.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

class UserService:
    def create_user(self, user_info):
        """åˆ›å»ºç”¨æˆ·"""
        try:
            # è®°å½•è°ƒè¯•ä¿¡æ¯
            logger.debug(f"å¼€å§‹åˆ›å»ºç”¨æˆ·: {user_info}")
            
            # è®°å½•å…³é”®æ“ä½œ
            logger.info(f"æ–°ç”¨æˆ·æ³¨å†Œ: {user_info['username']}")
            
            # è®°å½•è­¦å‘Šä¿¡æ¯
            if user_info.get('age', 0) < 18:
                logger.warning(f"æœªæˆå¹´ç”¨æˆ·æ³¨å†Œ: {user_info['username']}")
                
        except Exception as e:
            # è®°å½•é”™è¯¯ä¿¡æ¯
            logger.error(f"åˆ›å»ºç”¨æˆ·å¤±è´¥: {str(e)}", exc_info=True)
            raise
```

### 2.3 æ•°æ®åº“æ“ä½œ
```python
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

# æ•°æ®åº“è¿æ¥é…ç½®
class DatabaseConfig:
    def __init__(self):
        self.engine = create_engine(
            'mysql+pymysql://user:pass@localhost/dbname',
            pool_size=5,
            max_overflow=10,
            pool_timeout=30
        )
        self.Session = sessionmaker(bind=self.engine)
        
    def get_session(self):
        return self.Session()

# æ•°æ®åº“æ“ä½œç¤ºä¾‹
class UserRepository:
    def __init__(self, db_config):
        self.db_config = db_config
        
    def save_user(self, user):
        """ä¿å­˜ç”¨æˆ·ä¿¡æ¯"""
        session = self.db_config.get_session()
        try:
            session.add(user)
            session.commit()
        except Exception as e:
            session.rollback()
            raise
        finally:
            session.close()
```

## ä¸‰ã€å‰ç«¯è§„èŒƒ
### 3.1 Vueç»„ä»¶è§„èŒƒ
```vue
<!-- ç»„ä»¶å‘½åä½¿ç”¨å¤§é©¼å³° -->
<template>
  <div class="user-profile">
    <!-- ä½¿ç”¨è¿å­—ç¬¦å‘½åCSSç±» -->
    <div class="user-info">
      <h2>{{ userInfo.name }}</h2>
      <p>{{ userInfo.email }}</p>
    </div>
    
    <!-- äº‹ä»¶å‘½åä½¿ç”¨kebab-case -->
    <button @click="handle-click">
      æ›´æ–°ä¿¡æ¯
    </button>
  </div>
</template>

<script>
// ç»„ä»¶å®šä¹‰
export default {
  name: 'UserProfile',
  
  // å±æ€§å®šä¹‰
  props: {
    userInfo: {
      type: Object,
      required: true
    }
  },
  
  // æ•°æ®å®šä¹‰
  data() {
    return {
      loading: false
    }
  },
  
  // æ–¹æ³•å®šä¹‰
  methods: {
    handleClick() {
      this.$emit('update')
    }
  }
}
</script>

<style scoped>
/* CSSå‘½åä½¿ç”¨è¿å­—ç¬¦ */
.user-profile {
  padding: 20px;
}

.user-info {
  margin-bottom: 15px;
}
</style>
```

### 3.2 TypeScriptè§„èŒƒ
```typescript
// æ¥å£å‘½åä½¿ç”¨å¤§å†™Iå‰ç¼€
interface IUserInfo {
    id: string;
    name: string;
    age: number;
    email?: string;  // å¯é€‰å±æ€§
}

// ç±»å‹åˆ«åä½¿ç”¨å¤§å†™Tå‰ç¼€
type TApiResponse<T> = {
    code: number;
    message: string;
    data: T;
}

// æšä¸¾å‘½åä½¿ç”¨å¤§å†™Eå‰ç¼€
enum EUserStatus {
    Active = 'active',
    Inactive = 'inactive',
    Blocked = 'blocked'
}

// æœåŠ¡ç±»å®ç°
class UserService {
    // å¼‚æ­¥æ–¹æ³•è¿”å›Promise
    async getUserInfo(userId: string): Promise<IUserInfo> {
        try {
            const response = await fetch(`/api/users/${userId}`);
            const result: TApiResponse<IUserInfo> = await response.json();
            
            if (result.code !== 200) {
                throw new Error(result.message);
            }
            
            return result.data;
        } catch (error) {
            console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
            throw error;
        }
    }
}
```

## å››ã€APIè§„èŒƒ
### 4.1 RESTful API
```python
from flask import Flask, jsonify, request
from flask_restful import Resource, Api

app = Flask(__name__)
api = Api(app)

# APIå“åº”æ ¼å¼
def api_response(data=None, message="success", code=200):
    return jsonify({
        "code": code,
        "message": message,
        "data": data
    })

# ç”¨æˆ·èµ„æº
class UserResource(Resource):
    # è·å–ç”¨æˆ·ä¿¡æ¯
    def get(self, user_id):
        """
        GET /api/users/<user_id>
        """
        try:
            user = get_user_by_id(user_id)
            return api_response(user)
        except Exception as e:
            return api_response(message=str(e), code=500)
    
    # åˆ›å»ºç”¨æˆ·
    def post(self):
        """
        POST /api/users
        """
        try:
            user_data = request.get_json()
            user = create_user(user_data)
            return api_response(user, code=201)
        except Exception as e:
            return api_response(message=str(e), code=500)
    
    # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    def put(self, user_id):
        """
        PUT /api/users/<user_id>
        """
        try:
            user_data = request.get_json()
            user = update_user(user_id, user_data)
            return api_response(user)
        except Exception as e:
            return api_response(message=str(e), code=500)
    
    # åˆ é™¤ç”¨æˆ·
    def delete(self, user_id):
        """
        DELETE /api/users/<user_id>
        """
        try:
            delete_user(user_id)
            return api_response(message="ç”¨æˆ·å·²åˆ é™¤")
        except Exception as e:
            return api_response(message=str(e), code=500)

# æ³¨å†ŒAPIè·¯ç”±
api.add_resource(UserResource, '/api/users', '/api/users/<user_id>')
```

### 4.2 APIæ–‡æ¡£
```python
from flask_restx import Api, Resource, fields

api = Api(
    title='ç”¨æˆ·æœåŠ¡API',
    version='1.0.0',
    description='ç”¨æˆ·æœåŠ¡ç›¸å…³æ¥å£æ–‡æ¡£'
)

# APIæ¨¡å‹å®šä¹‰
user_model = api.model('User', {
    'id': fields.String(required=True, description='ç”¨æˆ·ID'),
    'name': fields.String(required=True, description='ç”¨æˆ·åç§°'),
    'email': fields.String(required=True, description='ç”µå­é‚®ç®±'),
    'age': fields.Integer(required=False, description='å¹´é¾„')
})

# APIæ¥å£æ–‡æ¡£
@api.route('/users/<user_id>')
@api.doc(params={'user_id': 'ç”¨æˆ·ID'})
class UserApi(Resource):
    @api.doc('è·å–ç”¨æˆ·ä¿¡æ¯')
    @api.marshal_with(user_model)
    def get(self, user_id):
        """è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯"""
        return get_user_by_id(user_id)
    
    @api.doc('æ›´æ–°ç”¨æˆ·ä¿¡æ¯')
    @api.expect(user_model)
    @api.marshal_with(user_model)
    def put(self, user_id):
        """æ›´æ–°æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯"""
        return update_user(user_id, api.payload)
```

## äº”ã€æµ‹è¯•è§„èŒƒ
### 5.1 å•å…ƒæµ‹è¯•
```python
import unittest
from unittest.mock import Mock, patch

class UserServiceTest(unittest.TestCase):
    def setUp(self):
        """æµ‹è¯•å‰ç½®å¤„ç†"""
        self.user_service = UserService()
        self.user_repository = Mock()
        
    def test_create_user_success(self):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·æˆåŠŸåœºæ™¯"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        user_data = {
            "name": "å¼ ä¸‰",
            "email": "zhangsan@example.com"
        }
        
        # Mockæ•°æ®åº“æ“ä½œ
        self.user_repository.save.return_value = {
            "id": "1",
            **user_data
        }
        
        # æ‰§è¡Œæµ‹è¯•
        result = self.user_service.create_user(user_data)
        
        # éªŒè¯ç»“æœ
        self.assertEqual(result["name"], user_data["name"])
        self.assertEqual(result["email"], user_data["email"])
        self.assertTrue("id" in result)
        
    def test_create_user_invalid_email(self):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·é‚®ç®±æ ¼å¼é”™è¯¯åœºæ™¯"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        user_data = {
            "name": "å¼ ä¸‰",
            "email": "invalid_email"
        }
        
        # æ‰§è¡Œæµ‹è¯•å¹¶éªŒè¯å¼‚å¸¸
        with self.assertRaises(ValidationError):
            self.user_service.create_user(user_data)
```

### 5.2 é›†æˆæµ‹è¯•
```python
import pytest
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

class TestUserApi:
    def setup_method(self):
        """æµ‹è¯•å‰ç½®å¤„ç†"""
        # åˆå§‹åŒ–æµ‹è¯•æ•°æ®åº“
        init_test_database()
        
    def teardown_method(self):
        """æµ‹è¯•åç½®å¤„ç†"""
        # æ¸…ç†æµ‹è¯•æ•°æ®
        clean_test_database()
        
    def test_create_user_api(self):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·API"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        user_data = {
            "name": "å¼ ä¸‰",
            "email": "zhangsan@example.com"
        }
        
        # å‘é€è¯·æ±‚
        response = client.post("/api/users", json=user_data)
        
        # éªŒè¯å“åº”
        assert response.status_code == 201
        data = response.json()
        assert data["code"] == 200
        assert data["data"]["name"] == user_data["name"]
        assert data["data"]["email"] == user_data["email"]
        
    def test_get_user_api(self):
        """æµ‹è¯•è·å–ç”¨æˆ·API"""
        # åˆ›å»ºæµ‹è¯•ç”¨æˆ·
        user_id = create_test_user()
        
        # å‘é€è¯·æ±‚
        response = client.get(f"/api/users/{user_id}")
        
        # éªŒè¯å“åº”
        assert response.status_code == 200
        data = response.json()
        assert data["code"] == 200
        assert data["data"]["id"] == user_id
```

## å…­ã€å®‰å…¨è§„èŒƒ
### 6.1 å¯†ç åŠ å¯†
```python
import hashlib
import secrets
from base64 import b64encode

class PasswordHasher:
    """å¯†ç åŠ å¯†å·¥å…·ç±»"""
    
    @staticmethod
    def generate_salt(length=16):
        """ç”Ÿæˆéšæœºç›å€¼"""
        return b64encode(secrets.token_bytes(length)).decode('utf-8')
    
    @staticmethod
    def hash_password(password: str, salt: str) -> str:
        """
        å¯†ç åŠ å¯†
        
        Args:
            password: åŸå§‹å¯†ç 
            salt: ç›å€¼
            
        Returns:
            str: åŠ å¯†åçš„å¯†ç 
        """
        # ç»„åˆå¯†ç å’Œç›å€¼
        salted_password = password + salt
        
        # ä½¿ç”¨SHA256è¿›è¡ŒåŠ å¯†
        hasher = hashlib.sha256()
        hasher.update(salted_password.encode('utf-8'))
        
        return hasher.hexdigest()
    
    @staticmethod
    def verify_password(password: str, salt: str, hashed_password: str) -> bool:
        """
        éªŒè¯å¯†ç 
        
        Args:
            password: å¾…éªŒè¯çš„å¯†ç 
            salt: ç›å€¼
            hashed_password: åŠ å¯†åçš„å¯†ç 
            
        Returns:
            bool: éªŒè¯æ˜¯å¦é€šè¿‡
        """
        return PasswordHasher.hash_password(password, salt) == hashed_password

# ä½¿ç”¨ç¤ºä¾‹
class UserAuth:
    def __init__(self):
        self.password_hasher = PasswordHasher()
    
    def register(self, username: str, password: str):
        """ç”¨æˆ·æ³¨å†Œ"""
        # ç”Ÿæˆç›å€¼
        salt = self.password_hasher.generate_salt()
        
        # åŠ å¯†å¯†ç 
        hashed_password = self.password_hasher.hash_password(password, salt)
        
        # ä¿å­˜ç”¨æˆ·ä¿¡æ¯
        user = {
            'username': username,
            'password': hashed_password,
            'salt': salt
        }
        save_user(user)
    
    def login(self, username: str, password: str) -> bool:
        """ç”¨æˆ·ç™»å½•"""
        # è·å–ç”¨æˆ·ä¿¡æ¯
        user = get_user_by_username(username)
        if not user:
            return False
        
        # éªŒè¯å¯†ç 
        return self.password_hasher.verify_password(
            password,
            user['salt'],
            user['password']
        )
```

### 6.2 SQLæ³¨å…¥é˜²æŠ¤
```python
from sqlalchemy import create_engine, text
from typing import List, Dict

class DatabaseService:
    def __init__(self, connection_string: str):
        self.engine = create_engine(connection_string)
    
    def unsafe_query(self, username: str) -> List[Dict]:
        """
        ä¸å®‰å…¨çš„æŸ¥è¯¢æ–¹å¼(å®¹æ˜“é­å—SQLæ³¨å…¥)
        """
        # é”™è¯¯ç¤ºä¾‹!ä¸è¦ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥
        query = f"SELECT * FROM users WHERE username = '{username}'"
        with self.engine.connect() as conn:
            result = conn.execute(query)
            return [dict(row) for row in result]
    
    def safe_query(self, username: str) -> List[Dict]:
        """
        å®‰å…¨çš„æŸ¥è¯¢æ–¹å¼(ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢)
        """
        # æ­£ç¡®ç¤ºä¾‹:ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
        query = text("SELECT * FROM users WHERE username = :username")
        with self.engine.connect() as conn:
            result = conn.execute(query, {"username": username})
            return [dict(row) for row in result]

# ORMæ–¹å¼(æ›´å®‰å…¨)
from sqlalchemy.orm import declarative_base, Session

Base = declarative_base()

class User(Base):
    __tablename__ = 'users'
    
    id = Column(Integer, primary_key=True)
    username = Column(String)
    email = Column(String)

class UserRepository:
    def __init__(self, session: Session):
        self.session = session
    
    def find_by_username(self, username: str) -> User:
        """ä½¿ç”¨ORMæŸ¥è¯¢(è‡ªåŠ¨é˜²æ­¢SQLæ³¨å…¥)"""
        return self.session.query(User).filter(
            User.username == username
        ).first()
```

### 6.3 XSSé˜²æŠ¤
```python
import html
from typing import Any, Dict

class XSSProtection:
    @staticmethod
    def escape_html(text: str) -> str:
        """
        è½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦
        """
        return html.escape(text)
    
    @staticmethod
    def clean_dict(data: Dict[str, Any]) -> Dict[str, Any]:
        """
        æ¸…ç†å­—å…¸ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å€¼
        """
        cleaned = {}
        for key, value in data.items():
            if isinstance(value, str):
                cleaned[key] = XSSProtection.escape_html(value)
            elif isinstance(value, dict):
                cleaned[key] = XSSProtection.clean_dict(value)
            elif isinstance(value, list):
                cleaned[key] = [
                    XSSProtection.escape_html(item)
                    if isinstance(item, str)
                    else item
                    for item in value
                ]
            else:
                cleaned[key] = value
        return cleaned

# ä½¿ç”¨ç¤ºä¾‹
class CommentService:
    def __init__(self):
        self.xss_protection = XSSProtection()
    
    def save_comment(self, comment_data: Dict[str, Any]):
        """ä¿å­˜è¯„è®º(é˜²æ­¢XSSæ”»å‡»)"""
        # æ¸…ç†è¾“å…¥æ•°æ®
        cleaned_data = self.xss_protection.clean_dict(comment_data)
        
        # ä¿å­˜åˆ°æ•°æ®åº“
        save_to_database(cleaned_data)
    
    def get_comment(self, comment_id: str) -> Dict[str, Any]:
        """è·å–è¯„è®º"""
        # ä»æ•°æ®åº“è·å–æ•°æ®
        comment = get_from_database(comment_id)
        
        # ç¡®ä¿è¾“å‡ºä¹Ÿç»è¿‡æ¸…ç†
        return self.xss_protection.clean_dict(comment)
```

## ä¸ƒã€æ–‡æ¡£è§„èŒƒ
### 7.1 ä»£ç æ³¨é‡Š
```python
class PaymentService:
    """
    æ”¯ä»˜æœåŠ¡ç±»
    
    è´Ÿè´£å¤„ç†æ‰€æœ‰æ”¯ä»˜ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘,åŒ…æ‹¬:
    1. åˆ›å»ºæ”¯ä»˜è®¢å•
    2. å¤„ç†æ”¯ä»˜å›è°ƒ
    3. æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€
    4. é€€æ¬¾å¤„ç†
    
    Attributes:
        payment_gateway: æ”¯ä»˜ç½‘å…³å®¢æˆ·ç«¯
        order_service: è®¢å•æœåŠ¡å®¢æˆ·ç«¯
        notification_service: é€šçŸ¥æœåŠ¡å®¢æˆ·ç«¯
    """
    
    def __init__(self, config: Dict[str, Any]):
        """
        åˆå§‹åŒ–æ”¯ä»˜æœåŠ¡
        
        Args:
            config: é…ç½®ä¿¡æ¯å­—å…¸
                - gateway_url: æ”¯ä»˜ç½‘å…³åœ°å€
                - app_id: åº”ç”¨ID
                - app_secret: åº”ç”¨å¯†é’¥
        
        Raises:
            ValueError: é…ç½®ä¿¡æ¯ä¸å®Œæ•´
            ConnectionError: æ— æ³•è¿æ¥æ”¯ä»˜ç½‘å…³
        """
        self.validate_config(config)
        self.init_services(config)
    
    def create_payment(self, order_id: str, amount: Decimal) -> Dict[str, Any]:
        """
        åˆ›å»ºæ”¯ä»˜è®¢å•
        
        Args:
            order_id: è®¢å•ID
            amount: æ”¯ä»˜é‡‘é¢
            
        Returns:
            Dict[str, Any]: æ”¯ä»˜è®¢å•ä¿¡æ¯
                - payment_id: æ”¯ä»˜ID
                - pay_url: æ”¯ä»˜é“¾æ¥
                - expire_time: è¿‡æœŸæ—¶é—´
                
        Raises:
            OrderNotFoundError: è®¢å•ä¸å­˜åœ¨
            PaymentError: æ”¯ä»˜åˆ›å»ºå¤±è´¥
        """
        pass
```

### 7.2 APIæ–‡æ¡£
```python
from fastapi import FastAPI, Path, Query
from pydantic import BaseModel

app = FastAPI(
    title="æ”¯ä»˜æœåŠ¡API",
    description="æä¾›æ”¯ä»˜ç›¸å…³çš„APIæ¥å£",
    version="1.0.0"
)

class PaymentRequest(BaseModel):
    """æ”¯ä»˜è¯·æ±‚æ¨¡å‹"""
    order_id: str = Field(..., description="è®¢å•ID")
    amount: float = Field(..., description="æ”¯ä»˜é‡‘é¢")
    currency: str = Field("CNY", description="è´§å¸ç±»å‹")
    
    class Config:
        schema_extra = {
            "example": {
                "order_id": "ORDER_001",
                "amount": 99.99,
                "currency": "CNY"
            }
        }

class PaymentResponse(BaseModel):
    """æ”¯ä»˜å“åº”æ¨¡å‹"""
    payment_id: str = Field(..., description="æ”¯ä»˜ID")
    pay_url: str = Field(..., description="æ”¯ä»˜é“¾æ¥")
    expire_time: datetime = Field(..., description="è¿‡æœŸæ—¶é—´")

@app.post(
    "/payments",
    response_model=PaymentResponse,
    summary="åˆ›å»ºæ”¯ä»˜è®¢å•",
    description="æ ¹æ®è®¢å•ä¿¡æ¯åˆ›å»ºæ”¯ä»˜è®¢å•,è¿”å›æ”¯ä»˜é“¾æ¥"
)
async def create_payment(
    payment: PaymentRequest,
    channel: str = Query(..., description="æ”¯ä»˜æ¸ é“")
):
    """
    åˆ›å»ºæ”¯ä»˜è®¢å•
    
    - **payment**: æ”¯ä»˜è¯·æ±‚ä¿¡æ¯
    - **channel**: æ”¯ä»˜æ¸ é“(alipay/wechat)
    
    è¿”å›æ”¯ä»˜è®¢å•ä¿¡æ¯,åŒ…å«æ”¯ä»˜é“¾æ¥
    """
    pass
```

## ç›¸å…³æ–‡æ¡£
- [æ–‡æ¡£è¯„å®¡è§„èŒƒ](01_æ–‡æ¡£è¯„å®¡è§„èŒƒ.md)
- [ç‰ˆæœ¬ç®¡ç†è§„èŒƒ](02_ç‰ˆæœ¬ç®¡ç†è§„èŒƒ.md)

## æ›´æ–°è®°å½•
- 2024-03-21: åˆ›å»ºä»£ç è§„èŒƒæ–‡æ¡£ 